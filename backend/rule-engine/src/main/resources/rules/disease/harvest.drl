package rules.general;

import com.agriscope.rule_engine.domain.model.FieldStatus;
import com.agriscope.rule_engine.domain.enums.GrowthStage;
import com.agriscope.rule_engine.domain.model.Recommendation;
import com.agriscope.rule_engine.domain.enums.RecommendationType;

global java.util.List recommendations;

rule "General - Seed Ready for Harvest"
    when
        $field : FieldStatus(stage == GrowthStage.READY)
    then
        Recommendation rec = new Recommendation();
        rec.setRecommendedSeed($field.getSeedType());
        rec.setRecommendationType(RecommendationType.READY_TO_HARVEST);

        rec.setAdvice("Harvest Alert: Your " + $field.getSeedType() + " field is ready!");
        rec.setReasoning("Based on the growth stage tracking, field " + $field.getFieldId() + " has reached maturity.");
        rec.getMetrics().put("field_id", $field.getFieldId());

        recommendations.add(rec);
end